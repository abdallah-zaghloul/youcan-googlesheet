## YouCan APP Laravel Template

This starter template helps you get started on building a Laravel app that can be embedded inside YouCan seller area.

## Dependencies

The dependencies required for the app to work are the following:

- [`youcanshop/sdk`](https://github.com/youcan-shop/youcan-shop-php-sdk): Helps you work with [YouCan Admin API](https://developer.youcan.shop/store-admin/introduction/getting-started.html).
- [`twilio/sdk`](https://github.com/twilio/twilio-php): Helps with decoding the JWT token.
- [`youcan-shop/qantra`](https://github.com/youcan-shop/qantra): Helps with communication between your app the YouCan seller Area, API, and more.

## YouCan App configuration File

Every embeded app needs a `youcan.app.json` file. This file describe your application to YouCan App core. This file is automatically generated by [YouCan CLI](https://github.com/youcan-shop/cli).

```json
{
    "name": "SMS App",
    "id": "dapp_2ZuFur92fPa8uFLBWh0AVuzOssdf",
    "app_url": "http://localhost:5173/youcan",
    "redirect_urls": [
        "http://localhost:5173/youcan/oauth/callback"
    ],
    "oauth": {
        "scopes": [
            "*"
        ],
        "client_id": "19"
    }
}
```

## Environment

The application needs some environment variables to be able to work with the API.

```
YOUCAN_API_KEY=19 # OAuth client ID
YOUCAN_API_SECRET=S88Ka3uhFUVpTGNC9ZQHKO9SXqRI5c1Mnakq9asl ## OAuth client secret
YOUCAN_API_SCOPES=* # Required scopes by your app
YOUCAN_API_REDIRECT=http://localhost:5173/youcan/oauth/callback # OAUth callback for authorization

YOUCAN_SHOP_URL=https://api.youcanshop.dev/ # This can be set in development phase to point your SDK to the development stores API. 
```

## Running the Application

You may have noticed from the above examples that the server is listening on `localhost:5173`. You can run this in Laravel using the below command.

```bash
php artisan serve --port=5173 --host=0.0.0.0
```

## Folder Structure

All the boilerplate needed is wrapped inside the `src/` folder and glued to your application using `YouCanServiceProvider`.

The important part for your application to be working is that for every request that will require the seller to be authenticated you should add the `YouCanAuthenticate` middleware.

Since your application is going to be embedded inside an IFrame, we require some [security headers](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP). You should also add the `YouCanCSPHeaders` middleware to inject the necessary headers in your HTTP response. 
